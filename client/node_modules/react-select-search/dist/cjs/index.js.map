{"mappings":"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","sources":["src/index.js","src/SelectSearch.jsx","src/useSelect.js","src/lib/getOption.js","src/lib/isSame.js","src/lib/updateOption.js","src/lib/toArray.js","src/lib/getDisplayValue.js","src/lib/getValue.js","src/lib/groupOptions.js","src/lib/fuzzySearch.js","src/lib/reduce.js","src/useOptions.js","src/lib/flattenOptions.js","src/useHighlight.js","src/lib/highlight.js","src/lib/classes.js","src/components/Options.jsx","src/components/Option.jsx","src/lib/isSelected.js"],"sourcesContent":["import SelectSearch from './SelectSearch';\nexport { default as useSelect } from './useSelect';\n\nexport default SelectSearch;\n","import { memo, forwardRef, useEffect, useRef, useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport useSelect from './useSelect';\nimport classes from './lib/classes';\nimport Options from './components/Options';\n\nconst SelectSearch = forwardRef(\n    (\n        {\n            disabled,\n            placeholder,\n            multiple,\n            search,\n            autoFocus,\n            autoComplete,\n            id,\n            closeOnSelect,\n            className,\n            renderValue,\n            renderOption,\n            renderGroupHeader,\n            fuzzySearch,\n            emptyMessage,\n            value,\n            ...hookProps\n        },\n        ref,\n    ) => {\n        const selectRef = useRef(null);\n        const cls = (classNames) => classes(classNames, className);\n        const [controlledValue, setControlledValue] = useState(value);\n        const [snapshot, valueProps, optionProps] = useSelect({\n            value: controlledValue,\n            placeholder,\n            multiple,\n            search,\n            closeOnSelect: closeOnSelect && !multiple,\n            useFuzzySearch: fuzzySearch,\n            ...hookProps,\n        });\n        const { highlighted, value: snapValue, fetching, focus } = snapshot;\n\n        const props = {\n            ...valueProps,\n            autoFocus,\n            autoComplete,\n            disabled,\n        };\n\n        useEffect(() => {\n            const { current } = selectRef;\n\n            if (current) {\n                const val = Array.isArray(snapValue) ? snapValue[0] : snapValue;\n                const selected = current.querySelector(\n                    highlighted > -1\n                        ? `[data-index=\"${highlighted}\"]`\n                        : `[value=\"${encodeURIComponent(val)}\"]`,\n                );\n\n                if (selected) {\n                    const rect = current.getBoundingClientRect();\n                    const selectedRect = selected.getBoundingClientRect();\n\n                    current.scrollTop =\n                        selected.offsetTop -\n                        rect.height / 2 +\n                        selectedRect.height / 2;\n                }\n            }\n        }, [snapValue, highlighted, selectRef.current]);\n\n        useEffect(() => setControlledValue(value), [value]);\n\n        return (\n            <div\n                ref={ref}\n                id={id}\n                className={cls({\n                    container: true,\n                    'is-multiple': multiple,\n                    'is-disabled': disabled,\n                    'is-loading': fetching,\n                    'has-focus': focus,\n                })}\n            >\n                {(!multiple || placeholder || search) && (\n                    <div className={cls('value')}>\n                        {renderValue &&\n                            renderValue(props, snapshot, cls('input'))}\n                        {!renderValue && (\n                            <input {...props} className={cls('input')} />\n                        )}\n                    </div>\n                )}\n                <div\n                    className={cls('select')}\n                    ref={selectRef}\n                    onMouseDown={(e) => e.preventDefault()}\n                >\n                    {snapshot.options.length > 0 && (\n                        <Options\n                            options={snapshot.options}\n                            optionProps={optionProps}\n                            renderOption={renderOption}\n                            renderGroupHeader={renderGroupHeader}\n                            disabled={disabled}\n                            snapshot={snapshot}\n                            cls={cls}\n                        />\n                    )}\n                    {!snapshot.options.length && (\n                        <ul className={cls('options')}>\n                            {!snapshot.options.length && emptyMessage && (\n                                <li className={cls('not-found')}>\n                                    {emptyMessage}\n                                </li>\n                            )}\n                        </ul>\n                    )}\n                </div>\n            </div>\n        );\n    },\n);\n\nSelectSearch.defaultProps = {\n    // Data\n    options: [],\n    fuzzySearch: true,\n\n    // InteractionÂ´\n    printOptions: 'auto',\n    closeOnSelect: true,\n    debounce: 250,\n\n    // Attributes\n    autoComplete: 'on',\n\n    // Design\n    className: 'select-search',\n};\n\nSelectSearch.propTypes = {\n    // Data\n    options: PropTypes.arrayOf(\n        PropTypes.shape({\n            name: PropTypes.string.isRequired,\n            value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n                .isRequired,\n        }),\n    ),\n    getOptions: PropTypes.func,\n    filterOptions: PropTypes.arrayOf(PropTypes.func),\n    fuzzySearch: PropTypes.bool,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\n    // Interaction\n    multiple: PropTypes.bool,\n    search: PropTypes.bool,\n    disabled: PropTypes.bool,\n    closeOnSelect: PropTypes.bool,\n    debounce: PropTypes.number,\n\n    // Attributes\n    placeholder: PropTypes.string,\n    id: PropTypes.string,\n    autoComplete: PropTypes.string,\n    autoFocus: PropTypes.bool,\n\n    // Design\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n\n    // Renderers\n    renderOption: PropTypes.func,\n    renderGroupHeader: PropTypes.func,\n    renderValue: PropTypes.func,\n    emptyMessage: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    // Events\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n};\n\nSelectSearch.displayName = 'SelectSearch';\n\nexport default memo(SelectSearch);\n","import { useEffect, useRef, useState } from 'react';\nimport getOption from './lib/getOption';\nimport updateOption from './lib/updateOption';\nimport getDisplayValue from './lib/getDisplayValue';\nimport getValue from './lib/getValue';\nimport groupOptions from './lib/groupOptions';\nimport fuzzySearch from './lib/fuzzySearch';\nimport reduce from './lib/reduce';\nimport useOptions from './useOptions';\nimport useHighlight from './useHighlight';\n\nconst nullCb = () => {};\n\nexport default function useSelect({\n    options: defaultOptions,\n    defaultValue,\n    value,\n    multiple,\n    search,\n    onChange = nullCb,\n    onFocus = nullCb,\n    onBlur = nullCb,\n    closeOnSelect = true,\n    placeholder,\n    getOptions,\n    filterOptions,\n    useFuzzySearch = true,\n    debounce,\n}) {\n    const ref = useRef();\n    const [option, setOption] = useState(null);\n    const [q, setSearch] = useState('');\n    const [focus, setFocus] = useState(false);\n    const [options, fetching] = useOptions(\n        defaultOptions,\n        getOptions,\n        debounce,\n        q,\n    );\n\n    const onSelect = (v) => {\n        const newOption = updateOption(\n            getOption(decodeURIComponent(v), options),\n            option,\n            multiple,\n        );\n\n        if (value === undefined) {\n            setOption(newOption);\n        }\n\n        onChange(getValue(newOption), newOption);\n\n        setTimeout(() => {\n            if (ref.current && closeOnSelect) {\n                ref.current.blur();\n            }\n        }, 0);\n    };\n\n    const [keyHandlers, highlighted, setHighlighted] = useHighlight(\n        options,\n        onSelect,\n        ref,\n    );\n    const middleware = [\n        useFuzzySearch ? fuzzySearch : null,\n        ...(filterOptions ? filterOptions : []),\n    ];\n\n    const snapshot = {\n        search: q,\n        focus,\n        option,\n        value: getValue(option),\n        fetching,\n        highlighted,\n        options: groupOptions(reduce(middleware, options, q)),\n        displayValue: getDisplayValue(option, options, placeholder),\n    };\n\n    const valueProps = {\n        tabIndex: '0',\n        readOnly: !search,\n        placeholder,\n        value: focus && search ? q : snapshot.displayValue,\n        ref,\n        ...keyHandlers,\n        onFocus: (e) => {\n            setFocus(true);\n            onFocus(e);\n        },\n        onBlur: (e) => {\n            setFocus(false);\n            setSearch('');\n            setHighlighted(-1);\n            onBlur(e);\n        },\n        onMouseDown: (e) => {\n            if (focus) {\n                e.preventDefault();\n                ref.current.blur();\n            }\n        },\n        onChange: search\n            ? ({ target }) => setSearch(target.value)\n            : null,\n    };\n\n    const optionProps = {\n        tabIndex: '-1',\n        onMouseDown(e) {\n            e.preventDefault();\n            onSelect(e.currentTarget.value);\n        },\n    };\n\n    useEffect(() => {\n        setOption(getOption(\n            value === undefined ? defaultValue : value,\n            options,\n        ));\n    }, [value, options]);\n\n    return [snapshot, valueProps, optionProps];\n}\n","import isSame from './isSame';\n\nexport default function getOption(value, options) {\n    if (Array.isArray(value)) {\n        return value\n            .map((v) => options.find((o) => isSame(o.value, v)))\n            .filter((o) => o);\n    }\n\n    return options.find((o) => isSame(o.value, value)) || null;\n}\n","export default function isSame(v1, v2) {\n    return String(v1) === String(v2);\n}\n","import isSame from './isSame';\nimport toArray from './toArray';\n\nexport default function updateOption(newOption, oldOption, multiple) {\n    if (!newOption) {\n        return oldOption;\n    }\n\n    if (!multiple) {\n        return newOption;\n    }\n\n    if (!oldOption) {\n        return toArray(newOption);\n    }\n\n    const nextOption = toArray(oldOption);\n    const newOptionIndex = nextOption.findIndex((o) =>\n        isSame(o.value, newOption.value),\n    );\n\n    if (newOptionIndex >= 0) {\n        nextOption.splice(newOptionIndex, 1);\n    } else {\n        nextOption.push(newOption);\n    }\n\n    return nextOption;\n}\n","export default function toArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\n","export default function getDisplayValue(option, options, placeholder) {\n    if (!option && !placeholder) {\n        return options && options.length ? options[0].name || '' : '';\n    }\n\n    const isMultiple = Array.isArray(option);\n\n    if (!option && !isMultiple) {\n        return '';\n    }\n\n    return isMultiple\n        ? option\n              .map((o) => o.name)\n              .filter(Boolean)\n              .join(', ')\n        : option.name || '';\n}\n","export default function getValue(option) {\n    if (!option) return null;\n\n    if (Array.isArray(option)) {\n        return option.filter(Boolean).map((o) => o.value);\n    }\n\n    return option.value || null;\n}\n","export default function groupOptions(options) {\n    const nextOptions = [];\n\n    options.forEach((option) => {\n        if (option.group) {\n            const group = nextOptions.findIndex((o) => o.type === 'group' && o.name === option.group);\n\n            if (group >= 0) {\n                nextOptions[group].items.push(option);\n            } else {\n                nextOptions.push({\n                    items: [option],\n                    type: 'group',\n                    name: option.group,\n                });\n            }\n        } else {\n            nextOptions.push(option);\n        }\n    });\n\n    return nextOptions;\n}\n","function search(q, text) {\n    const searchLength = q.length;\n    const textLength = text.length;\n\n    if (searchLength > textLength) {\n        return false;\n    }\n\n    if (text.indexOf(q) >= 0) {\n        return true;\n    }\n\n    mainLoop: for (let i = 0, j = 0; i < searchLength; i += 1) {\n        const ch = q.charCodeAt(i);\n\n        while (j < textLength) {\n            if (text.charCodeAt(j++) === ch) {\n                continue mainLoop;\n            }\n        }\n\n        return false;\n    }\n\n    return true;\n}\n\nexport default function fuzzySearch(options, query) {\n    return !query.length\n        ? options\n        : options.filter((o) =>\n              search(\n                  query.toLowerCase(),\n                  `${o.name} ${o.group || ''}`.trim().toLowerCase(),\n              ),\n          );\n}\n","export default function reduce(middleware, items, query) {\n    return middleware.filter(Boolean)\n        .reduce((data, cb) => cb(data, query), items)\n        .map((item, i) => ({ ...item, index: i }));\n}\n","import { useEffect, useState } from 'react';\nimport flattenOptions from './lib/flattenOptions';\n\nexport default function useOptions(\n    defaultOptions,\n    getOptions,\n    debounceTime,\n    search,\n) {\n    const [options, setOptions] = useState(() => flattenOptions(defaultOptions));\n    const [fetching, setFetching] = useState(false);\n\n    useEffect(() => {\n        let timeout;\n\n        if (!getOptions) {\n            return;\n        }\n\n        timeout = setTimeout(() => {\n            const optionsReq = getOptions(search, options);\n\n            setFetching(true);\n\n            Promise.resolve(optionsReq)\n                .then((newOptions) => setOptions(flattenOptions(newOptions)))\n                .finally(() => setFetching(false));\n        }, debounceTime);\n\n        return () => {\n            clearTimeout(timeout);\n        };\n    }, [search]);\n\n    useEffect(() => {\n        setOptions(flattenOptions(defaultOptions));\n    }, [defaultOptions]);\n\n    return [options, fetching];\n}\n","export default function flattenOptions(options) {\n    let index = 0;\n\n    return options.map((option) => {\n        if (option.type === 'group') {\n            return option.items.map((o) => ({\n                ...o,\n                group: option.name,\n                index: index++,\n            }));\n        }\n\n        return { ...option, index: index++ };\n    }).flat();\n}\n","import { useState } from 'react';\nimport highlight from './lib/highlight';\n\nexport default function useHighlight(options, onSelect, ref) {\n    const [highlighted, setHighlighted] = useState(-1);\n\n    return [\n        {\n            onKeyDown: (e) => {\n                const key = e.key.replace('Arrow', '').toLowerCase();\n\n                if (key === 'down' || key === 'up') {\n                    e.preventDefault();\n                    setHighlighted(highlight(highlighted, key, options));\n                }\n            },\n            onKeyUp: (e) => {\n                if (e.key === 'Escape') {\n                    e.preventDefault();\n                    ref.current.blur();\n                } else if (e.key === 'Enter') {\n                    e.preventDefault();\n\n                    if (options[highlighted]) {\n                        onSelect(options[highlighted].value);\n                    }\n                }\n            },\n        },\n        highlighted,\n        setHighlighted,\n    ];\n}\n","export default function highlight(current, dir, options) {\n    const max = options.length - 1;\n    let option = null;\n    let i = -1;\n    let newHighlighted = current;\n\n    while (i++ <= max && (!option || option.disabled)) {\n        newHighlighted =\n            dir === 'down' ? newHighlighted + 1 : newHighlighted - 1;\n\n        if (newHighlighted < 0) {\n            newHighlighted = max;\n        } else if (newHighlighted > max) {\n            newHighlighted = 0;\n        }\n\n        option = options[newHighlighted];\n    }\n\n    return newHighlighted;\n}\n","const isString = (str) => typeof str === 'string';\nconst getClassName = (str, className) =>\n    isString(className) ? `${className}-${str}` : className[str];\n\nexport default function classes(classNames, className) {\n    if (isString(classNames)) return getClassName(classNames, className);\n\n    return Object.entries(classNames)\n        .filter(([cls, display]) => cls && display)\n        .map(([cls]) => getClassName(cls, className))\n        .join(' ');\n}\n","/* eslint-disable react/prop-types */\nimport { memo } from 'react';\nimport Option from './Option';\nimport isSelected from '../lib/isSelected';\n\nfunction Options(props) {\n    const {\n        options,\n        cls,\n        renderOption,\n        renderGroupHeader,\n        optionProps,\n        snapshot,\n        disabled,\n    } = props;\n\n    return (\n        <ul className={cls('options')}>\n            {options.map((o) => {\n                if (o.type === 'group') {\n                    return (\n                        <li role=\"none\" className={cls('row')} key={o.name}>\n                            <div className={cls('group')}>\n                                <div className={cls('group-header')}>\n                                    {renderGroupHeader\n                                        ? renderGroupHeader(o.name)\n                                        : o.name}\n                                </div>\n                                <Options {...props} options={o.items} />\n                            </div>\n                        </li>\n                    );\n                }\n\n                return (\n                    <Option\n                        key={o.value}\n                        option={o}\n                        optionProps={optionProps}\n                        cls={cls}\n                        renderOption={renderOption}\n                        selected={isSelected(o, snapshot.option)}\n                        highlighted={snapshot.highlighted === o.index}\n                        disabled={o.disabled || disabled}\n                    />\n                );\n            })}\n        </ul>\n    );\n}\n\nexport default memo(Options);\n","/* eslint-disable react/prop-types */\nimport { memo } from 'react';\n\nfunction Option({\n    optionProps,\n    highlighted,\n    selected,\n    option,\n    cls,\n    renderOption,\n    disabled,\n}) {\n    const props = {\n        ...optionProps,\n        value: encodeURIComponent(option.value),\n        disabled,\n    };\n    const className = cls({\n        option: true,\n        'is-selected': selected,\n        'is-highlighted': highlighted,\n    });\n\n    return (\n        <li className={cls('row')} role=\"menuitem\" data-index={option.index}>\n            {renderOption &&\n                renderOption(\n                    props,\n                    option,\n                    { selected, highlighted },\n                    className,\n                )}\n            {!renderOption && (\n                <button type=\"button\" className={className} {...props}>\n                    {option.name}\n                </button>\n            )}\n        </li>\n    );\n}\n\nexport default memo(Option);\n","export default function isSelected(option, selectedOption) {\n    if (!selectedOption) return false;\n\n    return Array.isArray(selectedOption)\n        ? selectedOption.findIndex((o) => o.value === option.value) >= 0\n        : selectedOption.value === option.value;\n}\n"],"names":["SelectSearch","default","useSelect","memo","forwardRef","useEffect","useRef","useState","PropTypes","classes","Options","disabled","placeholder","multiple","search","autoFocus","autoComplete","id","closeOnSelect","className","renderValue","renderOption","renderGroupHeader","fuzzySearch","emptyMessage","value","hookProps","ref","selectRef","cls","classNames","controlledValue","setControlledValue","snapshot","valueProps","optionProps","useFuzzySearch","highlighted","snapValue","fetching","focus","props","current","val","Array","isArray","selected","querySelector","encodeURIComponent","rect","getBoundingClientRect","selectedRect","scrollTop","offsetTop","height","container","e","preventDefault","options","length","defaultProps","printOptions","debounce","displayName","getOption","updateOption","getDisplayValue","getValue","groupOptions","reduce","useOptions","useHighlight","nullCb","defaultOptions","defaultValue","onChange","onFocus","onBlur","getOptions","filterOptions","option","setOption","q","setSearch","setFocus","onSelect","v","newOption","decodeURIComponent","undefined","setTimeout","blur","keyHandlers","setHighlighted","middleware","displayValue","tabIndex","readOnly","onMouseDown","target","currentTarget","isSame","map","find","o","filter","v1","v2","String","toArray","oldOption","nextOption","newOptionIndex","findIndex","splice","push","name","isMultiple","Boolean","join","nextOptions","forEach","group","type","items","text","searchLength","textLength","indexOf","mainLoop","i","j","ch","charCodeAt","query","toLowerCase","trim","data","cb","item","index","flattenOptions","debounceTime","setOptions","setFetching","timeout","optionsReq","Promise","resolve","then","newOptions","finally","clearTimeout","flat","highlight","onKeyDown","key","replace","onKeyUp","dir","max","newHighlighted","isString","str","getClassName","Object","entries","display","Option","isSelected","selectedOption"],"version":3,"file":"index.js.map"}